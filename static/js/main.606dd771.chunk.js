(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){},180:function(e,t,a){},182:function(e,t,a){},184:function(e,t,a){},186:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(44),c=a.n(s),i=a(71),o=(a(98),a(17)),l=a(18),u=a(20),m=a(19),h=a(21),p=a(86),d=a(32),g=a(27),b=function(e){var t=e.component,a=e.props,n=Object(g.a)(e,["component","props"]);return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return r.a.createElement(t,Object.assign({},e,a))}}))},f=a(85),E=function(e){var t=e.component,a=e.props,n=Object(g.a)(e,["component","props"]);return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(t,Object.assign({},e,a)):r.a.createElement(f.a,{to:"/login?redirect=".concat(e.location.pathname).concat(e.location.search)})}}))},v=function(e){var t=e.component,a=e.props,n=Object(g.a)(e,["component","props"]),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);if(!a)return null;if(!a[2])return"";return decodeURIComponent(a[2].replace(/\+/g," "))}("redirect");return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(f.a,{to:""===s||null===s?"/":s}):r.a.createElement(t,Object.assign({},e,a))}}))};var j=a(13),y=a.n(j),O=a(23),S=a(24),k=a.n(S),L=a(197),w=a(191),x=a(192),C=a(200),A=a(39),N=(a(125),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={isLoading:!0,posts:[]},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(y.a.mark(function e(){var t,a,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isAuthenticated){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=this.props.user.id,e.next=6,k.a.get("".concat("https://islam-json-server.herokuapp.com","/posts?userId=").concat(t));case 6:a=e.sent,n=a.data,this.setState({posts:n.sort(function(e,t){return t.createdAt-e.createdAt})}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0);case 14:this.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderPostsList",value:function(e){return e.map(function(e){return r.a.createElement(L.a,{key:e.id,bsStyle:"info"},r.a.createElement(L.a.Heading,null,r.a.createElement(L.a.Title,null,r.a.createElement("b",null,e.title))),r.a.createElement(L.a.Body,null,e.body,r.a.createElement("hr",null),r.a.createElement(A.LinkContainer,{to:"/posts/".concat(e.id)},r.a.createElement(w.a,{bsStyle:"link"},"show comments"))),r.a.createElement(L.a.Footer,null,new Date(e.createdAt).toLocaleString()," \xa0\xa0",r.a.createElement("b",null,e.comments.length," comments")," \xa0\xa0"))})}},{key:"renderLander",value:function(){return r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Welcome to Blog"),r.a.createElement("p",null,"A simple blog app"))}},{key:"renderPosts",value:function(){return r.a.createElement("div",{className:"posts"},r.a.createElement(x.a,null,"Posts ",r.a.createElement("small",null,"(",this.state.posts.length,")")),r.a.createElement(A.LinkContainer,{to:"/posts/new"},r.a.createElement("h4",null,r.a.createElement(w.a,{bsStyle:"link"},r.a.createElement("b",null,"\uff0b")," Create a new post"))),r.a.createElement("br",null),r.a.createElement(C.a,{id:"postsPanelGroup"},!this.state.isLoading&&this.renderPostsList(this.state.posts)))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},this.props.isAuthenticated?this.renderPosts():this.renderLander())}}]),t}(n.Component)),F=(a(175),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}),I=a(91),H=a(26),D=a(193),P=a(194),B=a(199),T=a(179),z=(a(177),function(e){var t=e.isLoading,a=e.text,n=e.loadingText,s=e.className,c=void 0===s?"":s,i=e.disabled,o=void 0!==i&&i,l=Object(g.a)(e,["isLoading","text","loadingText","className","disabled"]);return r.a.createElement(w.a,Object.assign({className:"LoaderButton ".concat(c),disabled:o||t},l),t&&r.a.createElement(T.a,{glyph:"refresh",className:"spinning"}),t?n:a)}),J=(a(180),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(O.a)(y.a.mark(function e(t){var n,r,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),e.prev=2,e.next=5,k.a.get("".concat("https://islam-json-server.herokuapp.com","/users?username=").concat(a.state.username));case 5:if(n=e.sent,r=Object(I.a)(n.data,1),s=r[0]){e.next=10;break}throw new Error("username not found");case 10:a.props.userHasAuthenticated(s),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),a.setState({isLoading:!1}),alert(e.t0.message);case 17:case"end":return e.stop()}},e,this,[[2,13]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,username:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.username.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(D.a,{controlId:"username",bsSize:"large"},r.a.createElement(P.a,null,"Username"),r.a.createElement(B.a,{autoFocus:!0,type:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(z,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Login",loadingText:"Logging in\u2026"})))}}]),t}(n.Component)),M=(a(182),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(O.a)(y.a.mark(function e(t){var n,r,s,c,i,o,l;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),n=a.state,r=n.email,s=n.name,c=n.username,e.prev=3,e.next=6,k.a.post("".concat("https://islam-json-server.herokuapp.com","/users"),{email:r,name:s,username:c});case 6:if(i=e.sent,o=i.status,l=i.data,201===o){e.next=11;break}throw new Error("error creating user");case 11:a.props.userHasAuthenticated(l),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),alert(e.t0.message),a.setState({isLoading:!1});case 18:case"end":return e.stop()}},e,this,[[3,14]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:!1,email:"",name:"",username:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.email.length>0&&this.state.name.length>0&&this.state.username.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Signup"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(D.a,{controlId:"name",bsSize:"large"},r.a.createElement(P.a,null,"Name"),r.a.createElement(B.a,{autoFocus:!0,type:"name",value:this.state.name,onChange:this.handleChange})),r.a.createElement(D.a,{controlId:"username",bsSize:"large"},r.a.createElement(P.a,null,"Username"),r.a.createElement(B.a,{type:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(D.a,{controlId:"email",bsSize:"large"},r.a.createElement(P.a,null,"Email"),r.a.createElement(B.a,{type:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(z,{block:!0,bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Signup",loadingText:"Signing up\u2026"})))}}]),t}(n.Component)),R=(a(184),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(O.a)(y.a.mark(function e(t){var n,r,s,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({isLoading:!0}),n=a.state,r=n.title,s=n.body,e.prev=3,c=a.props.user.id,e.next=7,k.a.post("".concat("https://islam-json-server.herokuapp.com","/posts"),{title:r,body:s,userId:c,comments:[],createdAt:Date.now()});case 7:a.setState({isLoading:!1}),a.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),alert(e.t0.message),a.setState({isLoading:!1});case 15:case"end":return e.stop()}},e,this,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),a.state={isLoading:null,title:"",body:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"validateForm",value:function(){return this.state.title.length>0&&this.state.body.length>0}},{key:"render",value:function(){return r.a.createElement("div",{className:"NewPost"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(D.a,{controlId:"title"},r.a.createElement(B.a,{onChange:this.handleChange,value:this.state.title})),r.a.createElement(D.a,{controlId:"body"},r.a.createElement(B.a,{onChange:this.handleChange,value:this.state.body,componentClass:"textarea"})),r.a.createElement(z,{block:!0,bsStyle:"primary",bsSize:"large",disabled:!this.validateForm(),type:"submit",isLoading:this.state.isLoading,text:"Create",loadingText:"Creating\u2026"})))}}]),t}(n.Component)),U=(a(186),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(H.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(O.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.setState({isLoading:!0});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.renderComments=function(){return a.state.post.comments.map(function(e,t){return r.a.createElement(L.a,{key:t},r.a.createElement(L.a.Heading,null,"Author: \xa0\xa0",r.a.createElement("b",null,e.author.name," \xa0\xa0",e.author.email)),r.a.createElement(L.a.Body,null,e.body),r.a.createElement(L.a.Footer,null,new Date(e.createdAt).toLocaleString()," \xa0\xa0"))})},a.state={isLoading:null,post:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat("https://islam-json-server.herokuapp.com","/posts/").concat(this.props.match.params.id));case 3:t=e.sent,a=t.data,this.setState({post:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"validateForm",value:function(){return this.state.title.length>0&&this.state.body.length>0}},{key:"render",value:function(){return this.state.post&&r.a.createElement("div",{className:"Posts"},r.a.createElement(L.a,{bsStyle:"info"},r.a.createElement(L.a.Heading,null,r.a.createElement(L.a.Title,null,r.a.createElement("b",null,this.state.post.title))),r.a.createElement(L.a.Body,null,this.state.post.body),r.a.createElement(L.a.Footer,null,new Date(this.state.post.createdAt).toLocaleString()," ","\xa0\xa0",r.a.createElement("b",null,this.state.post.comments.length," comments")," \xa0\xa0")),r.a.createElement("hr",null),r.a.createElement("h3",null,"Comments"),r.a.createElement(C.a,{id:"commentsPanelGroup"},this.renderComments()))}}]),t}(n.Component)),W=function(e){var t=e.childProps;return r.a.createElement(p.a,null,r.a.createElement(b,{path:"/",exact:!0,component:N,props:t}),r.a.createElement(v,{path:"/login",exact:!0,component:J,props:t}),r.a.createElement(v,{path:"/signup",exact:!0,component:M,props:t}),r.a.createElement(E,{path:"/posts/new",exact:!0,component:R,props:t}),r.a.createElement(E,{path:"/posts/:id",exact:!0,component:U,props:t}),r.a.createElement(d.a,{component:F}))},$=a(35),G=a(84),q=a(198),K=a(195),Q=a(196),V=(a(188),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).userHasAuthenticated=function(e){e?(a.setState({user:e}),a.setState({isAuthenticated:!0}),localStorage.setItem("user",JSON.stringify(e))):(a.setState({user:null}),a.setState({isAuthenticated:!1}),localStorage.removeItem("user"))},a.handleLogout=function(){a.userHasAuthenticated(!1),a.props.history.push("/login")},a.state={isAuthenticated:!1,isAuthenticating:!0,user:null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("user"));e&&this.userHasAuthenticated(e),this.setState({isAuthenticating:!1})}},{key:"render",value:function(){var e={isAuthenticated:this.state.isAuthenticated,userHasAuthenticated:this.userHasAuthenticated,user:this.state.user};return!this.state.isAuthenticating&&r.a.createElement("div",{className:"App container"},r.a.createElement(q.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(q.a.Header,null,r.a.createElement(q.a.Brand,null,r.a.createElement($.a,{to:"/"},"Blog")),r.a.createElement(q.a.Toggle,null)),r.a.createElement(q.a.Collapse,null,r.a.createElement(K.a,{pullRight:!0},this.state.isAuthenticated?r.a.createElement(n.Fragment,null,r.a.createElement(q.a.Text,null,this.state.user.name),r.a.createElement(Q.a,{onClick:this.handleLogout},"Logout")):r.a.createElement(n.Fragment,null,r.a.createElement(A.LinkContainer,{to:"/signup"},r.a.createElement(Q.a,null,"Signup")),r.a.createElement(A.LinkContainer,{to:"/login"},r.a.createElement(Q.a,null,"Login")))))),r.a.createElement(W,{childProps:e}))}}]),t}(n.Component)),X=Object(G.a)(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},92:function(e,t,a){e.exports=a(190)},98:function(e,t,a){}},[[92,2,1]]]);
//# sourceMappingURL=main.606dd771.chunk.js.map